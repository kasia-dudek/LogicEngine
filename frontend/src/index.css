@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

/* Print Styles */
@media print {
  /* Page setup */
  @page {
    size: A4;
    margin: 1cm;
  }

  /* Hide interactive elements */
  .print\\:hidden {
    display: none !important;
  }

  /* Show print-only elements */
  .print\\:block {
    display: block !important;
  }

  /* Adjust backgrounds for print */
  .print\\:bg-blue-100 {
    background-color: #dbeafe !important;
  }

  .print\\:bg-green-100 {
    background-color: #dcfce7 !important;
  }

  .print\\:bg-yellow-100 {
    background-color: #fef3c7 !important;
  }

  .print\\:bg-purple-100 {
    background-color: #e9d5ff !important;
  }

  .print\\:bg-gray-200 {
    background-color: #e5e7eb !important;
  }

  /* Remove shadows and effects */
  .print\\:shadow-none {
    box-shadow: none !important;
  }

  /* Page breaks */
  .print\\:page-break-inside-avoid {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  .print\\:page-break-after-always {
    page-break-after: always !important;
  }

  /* Table headers repeat */
  thead {
    display: table-header-group !important;
  }

  /* Scale down large tables */
  .print\\:scale-90 {
    transform: scale(0.9) !important;
    transform-origin: top left !important;
  }

  /* Print container */
  .print-container {
    max-width: none !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Hide navigation and controls */
  nav, .navigation, button:not(.print\\:block), 
  .tabs, .tab-controls, .slide-controls,
  .toast, .modal, .dropdown {
    display: none !important;
  }

  /* Keep colors for important elements - don't force everything to black */
  /* Only set default text color for elements without specific color classes */
  body, p, div, span, td, th {
    color: #000;
  }

  /* Preserve text colors */
  .text-blue-700, .text-blue-600, .text-blue-800, .text-blue-900 {
    color: #1d4ed8 !important;
  }
  .text-green-700, .text-green-600, .text-green-800, .text-green-900 {
    color: #15803d !important;
  }
  .text-yellow-700, .text-yellow-600, .text-yellow-800 {
    color: #a16207 !important;
  }
  .text-purple-700, .text-purple-600, .text-purple-800 {
    color: #9333ea !important;
  }
  .text-red-700, .text-red-600, .text-red-800 {
    color: #b91c1c !important;
  }
  .text-orange-600, .text-orange-700 {
    color: #ea580c !important;
  }
  .text-pink-600, .text-pink-700 {
    color: #db2777 !important;
  }
  .text-indigo-600, .text-indigo-700 {
    color: #4f46e5 !important;
  }
  .text-teal-600, .text-teal-700 {
    color: #0d9488 !important;
  }
  .text-gray-400, .text-gray-500, .text-gray-600, .text-gray-700 {
    color: #6b7280 !important;
  }

  /* Preserve background colors */
  .bg-blue-50, .print\\:bg-blue-100 {
    background-color: #dbeafe !important;
  }
  .bg-green-50, .print\\:bg-green-100, .print\\:bg-green-200 {
    background-color: #dcfce7 !important;
  }
  .bg-yellow-50, .print\\:bg-yellow-100 {
    background-color: #fef9c3 !important;
  }
  .bg-purple-50, .print\\:bg-purple-100 {
    background-color: #f3e8ff !important;
  }
  .bg-gray-100, .bg-gray-200, .print\\:bg-gray-200 {
    background-color: #f3f4f6 !important;
  }
  
  /* KMapDisplay colors */
  .bg-blue-200 {
    background-color: #bfdbfe !important;
  }
  .bg-green-200 {
    background-color: #bbf7d0 !important;
  }
  .bg-yellow-200 {
    background-color: #fde68a !important;
  }
  .bg-pink-200 {
    background-color: #fbcfe8 !important;
  }
  .bg-purple-200 {
    background-color: #e9d5ff !important;
  }
  .bg-orange-200 {
    background-color: #fed7aa !important;
  }
  .bg-red-200 {
    background-color: #fecaca !important;
  }
  .bg-teal-200 {
    background-color: #99f6e4 !important;
  }
  
  /* ColoredExpression highlight colors */
  .bg-red-50 {
    background-color: #fef2f2 !important;
  }
  .bg-green-100 {
    background-color: #dcfce7 !important;
  }
  .text-red-800 {
    color: #991b1b !important;
  }
  .text-green-800, .text-green-900 {
    color: #166534 !important;
  }
  
  /* Mark elements for highlighting */
  mark {
    background-color: inherit !important;
    color: inherit !important;
  }
  mark.bg-green-100 {
    background-color: #dcfce7 !important;
    color: #166534 !important;
  }
  mark.bg-red-50 {
    background-color: #fef2f2 !important;
    color: #991b1b !important;
  }
  
  /* Keep white backgrounds */
  .bg-white {
    background-color: #ffffff !important;
  }

  /* Borders for structure */
  .border, .border-gray-200, .border-gray-300 {
    border: 1px solid #ccc !important;
  }
  
  /* Colored borders for KMapDisplay and other components */
  .border-blue-200, .border-blue-300, .border-blue-400 {
    border-color: #93c5fd !important;
  }
  .border-green-200, .border-green-300, .border-green-400 {
    border-color: #86efac !important;
  }
  .border-yellow-200, .border-yellow-300, .border-yellow-400 {
    border-color: #fde047 !important;
  }
  .border-pink-200, .border-pink-300, .border-pink-400 {
    border-color: #f9a8d4 !important;
  }
  .border-purple-200, .border-purple-300, .border-purple-400 {
    border-color: #c4b5fd !important;
  }
  .border-orange-200, .border-orange-300, .border-orange-400 {
    border-color: #fdba74 !important;
  }
  .border-red-200, .border-red-300, .border-red-400 {
    border-color: #fca5a5 !important;
  }
  .border-teal-200, .border-teal-300, .border-teal-400 {
    border-color: #5eead4 !important;
  }
  .border-blue-100 {
    border-color: #dbeafe !important;
  }
  .border-green-100 {
    border-color: #dcfce7 !important;
  }
  .border-yellow-100 {
    border-color: #fef9c3 !important;
  }
  .border-purple-100 {
    border-color: #f3e8ff !important;
  }
  
  /* Ring colors for highlights */
  .ring-red-200, .ring-red-300 {
    --tw-ring-color: #fecaca !important;
  }
  .ring-green-200, .ring-green-300 {
    --tw-ring-color: #bbf7d0 !important;
  }
  .ring-blue-500 {
    --tw-ring-color: #3b82f6 !important;
  }

  /* Typography adjustments */
  h1, h2, h3, h4, h5, h6 {
    color: #000 !important;
    page-break-after: avoid !important;
  }
  
  /* Allow colored headings where specified */
  h1.text-blue-700, h2.text-blue-700, h3.text-blue-700 {
    color: #1d4ed8 !important;
  }
  h1.text-gray-800, h2.text-gray-800, h3.text-gray-800 {
    color: #1f2937 !important;
  }

  /* Prevent orphans and widows */
  p, li {
    orphans: 3;
    widows: 3;
  }

  /* Table adjustments */
  table {
    border-collapse: collapse !important;
    width: 100% !important;
  }

  th, td {
    border: 1px solid #ccc !important;
    padding: 4px !important;
  }
  
  /* Preserve table cell colors */
  th.bg-gray-100, th.bg-gray-200, th.print\\:bg-gray-200 {
    background-color: #f3f4f6 !important;
  }
  tr.bg-green-100, tr.print\\:bg-green-200 {
    background-color: #dcfce7 !important;
  }
  td.text-green-800, td.print\\:text-green-900 {
    color: #166534 !important;
  }

  /* SVG adjustments */
  svg {
    max-width: 100% !important;
    height: auto !important;
  }
}

/* Custom scrollbar for steps table - always visible */
.scrollable-steps-table {
  overflow-x: scroll !important; /* Force scrollbar to always be visible */
  scrollbar-width: thin !important;
  scrollbar-color: #93C5FD #E5E7EB !important;
  /* Force scrollbar space reservation */
  scrollbar-gutter: stable;
  /* Prevent hiding scrollbar on macOS */
  -webkit-overflow-scrolling: touch;
  /* Ensure scrollbar area is always present */
  padding-bottom: 2px;
}

/* WebKit browsers (Chrome, Safari, Edge) */
.scrollable-steps-table::-webkit-scrollbar {
  height: 16px !important;
  display: block !important;
  -webkit-appearance: none !important;
  appearance: none !important;
  background-color: #E5E7EB !important;
}

.scrollable-steps-table::-webkit-scrollbar:horizontal {
  height: 16px !important;
}

.scrollable-steps-table::-webkit-scrollbar-track {
  background: #E5E7EB !important;
  border-radius: 8px !important;
  border: 2px solid #D1D5DB !important;
  -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.1) !important;
  box-shadow: inset 0 0 6px rgba(0,0,0,0.1) !important;
  margin: 2px 0 !important;
}

.scrollable-steps-table::-webkit-scrollbar-thumb {
  background: #93C5FD !important;
  border-radius: 8px !important;
  border: 2px solid #60A5FA !important;
  min-width: 20px !important;
  -webkit-box-shadow: none !important;
  box-shadow: none !important;
}

.scrollable-steps-table::-webkit-scrollbar-thumb:hover {
  background: #60A5FA !important;
}

.scrollable-steps-table::-webkit-scrollbar-thumb:active {
  background: #3B82F6 !important;
}

/* Firefox */
.scrollable-steps-table {
  scrollbar-width: thin !important;
  scrollbar-color: #93C5FD #E5E7EB !important;
}
